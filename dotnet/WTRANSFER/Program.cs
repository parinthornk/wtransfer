
using System.Net;
using System.Text;
using System.Xml.Linq;
using WTRANSFER;
using static Transfer;

//TestMoveFile.Test();

//new ImDone001();

Endpoint.Start();

//new TestMoveInternal();

//TestWithPGP.Test();

//PgpDecrypt.Test();

//Console.WriteLine("123");

//PocStream.Test();

/*string receivedJsonString = "{\"item\":{\"workspace\":\"default\",\"fileName\":\"OILSHL_0000000000023071.DAT\",\"retryRemaining\":5,\"fileNameArchive\":\"OILSHL_0000000000023071.DAT.20230621203709.arc\",\"session\":7569202,\"created\":\"2023-06-21 20:37:09\",\"retryIntervalMs\":60000,\"description\":\"Auto-generated by schedule ROSE_TAS_OILSHLSend_CS-BS_ERP_ECP100-BC_TASH203-36. [556bcfa35f924f979a031d553477048d]\",\"fnCallback\":null,\"folder\":\"/TASH203/sapoutboundor\",\"timeLatestRetry\":\"2023-06-21 20:37:14\",\"name\":\"a833c7ec3a8c4883a976b79794718bf3\",\"modified\":\"2023-06-21 20:38:17\",\"retryQuota\":5,\"folderArchive\":\"/TASH203/sapoutboundor/Archive\",\"timeNextRetry\":\"2023-06-21 20:38:14\",\"status\":\"SUCCESS\"},\"session\":{\"schedule\":\"ROSE_TAS_OILSHLSend_CS-BS_ERP_ECP100-BC_TASH203-36\",\"workspace\":\"default\",\"created\":\"2023-06-21 20:37:09\",\"description\":\"Auto-generated by schedule ROSE_TAS_OILSHLSend_CS-BS_ERP_ECP100-BC_TASH203-36. [556bcfa35f924f979a031d553477048d]\",\"modified\":\"2023-06-21 20:37:09\",\"remark\":null,\"id\":7569202,\"status\":\"CREATED\"},\"schedule\":{\"workspace\":\"default\",\"pgpKeyPath\":null,\"description\":null,\"pgpDirection\":null,\"validFrom\":null,\"enabled\":true,\"staticDirSource\":\"/TASH203/sapoutboundor\",\"fnIsFileToMove\":\"function(x){return true;}\",\"fnPgpRenameTo\":null,\"modified\":\"2023-07-06 20:43:53\",\"fnArchiveRenameTo\":null,\"plan\":\"*-*-* *:00:00,*-*-* *:01:00,*-*-* *:02:00,*-*-* *:03:00,*-*-* *:04:00,*-*-* *:05:00,*-*-* *:06:00,*-*-* *:07:00,*-*-* *:08:00,*-*-* *:09:00,*-*-* *:10:00,*-*-* *:11:00,*-*-* *:12:00,*-*-* *:13:00,*-*-* *:14:00,*-*-* *:15:00,*-*-* *:16:00,*-*-* *:17:00,*-*-* *:18:00,*-*-* *:19:00,*-*-* *:20:00,*-*-* *:21:00,*-*-* *:22:00,*-*-* *:23:00,*-*-* *:24:00,*-*-* *:25:00,*-*-* *:26:00,*-*-* *:27:00,*-*-* *:28:00,*-*-* *:29:00,*-*-* *:30:00,*-*-* *:31:00,*-*-* *:32:00,*-*-* *:33:00,*-*-* *:34:00,*-*-* *:35:00,*-*-* *:36:00,*-*-* *:37:00,*-*-* *:38:00,*-*-* *:39:00,*-*-* *:40:00,*-*-* *:41:00,*-*-* *:42:00,*-*-* *:43:00,*-*-* *:44:00,*-*-* *:45:00,*-*-* *:46:00,*-*-* *:47:00,*-*-* *:48:00,*-*-* *:49:00,*-*-* *:50:00,*-*-* *:51:00,*-*-* *:52:00,*-*-* *:53:00,*-*-* *:54:00,*-*-* *:55:00,*-*-* *:56:00,*-*-* *:57:00,*-*-* *:58:00,*-*-* *:59:00\",\"useDynamicDirSource\":false,\"fnRenameTo\":\"function(x){return x;}\",\"siteSource\":\"dcloud-sftp\",\"retryCount\":5,\"created\":\"2023-04-20 12:28:59\",\"isPendingAdHoc\":false,\"retryIntervalMs\":60000,\"siteTarget\":\"legacy-4f73154b-665e-41d5-833f-a7c9bd67e03e\",\"fnDynamicDirTarget\":null,\"previousCheckpoint\":\"2023-07-06 20:43:53\",\"staticDirTarget\":\"/DEV/H203/SAP_OUTBOUND_DEV\",\"archiveFolder\":\"/archive\",\"fnDynamicDirSource\":null,\"pgpKeyPassword\":null,\"name\":\"ROSE_TAS_OILSHLSend_CS-BS_ERP_ECP100-BC_TASH203-36\",\"validUntil\":null,\"useDynamicDirTarget\":false,\"workerThreads\":5},\"siteSource\":{\"workspace\":\"default\",\"protocol\":\"sftp\",\"password\":\"WSO2D@sftp#99\",\"port\":22,\"created\":\"2023-04-20 12:28:59\",\"keyPath\":\"\",\"name\":\"dcloud-sftp\",\"host\":\"or-sftpserv-t01.pttor.com\",\"description\":\"\",\"modified\":\"2023-04-25 12:24:38\",\"username\":\"sftp_wso2d_oreo\"},\"siteTarget\":{\"workspace\":\"default\",\"protocol\":\"ftp\",\"password\":\"initial0$\",\"port\":20,\"created\":\"2023-04-20 12:28:58\",\"keyPath\":null,\"name\":\"legacy-4f73154b-665e-41d5-833f-a7c9bd67e03e\",\"host\":\"10.195.2.19\",\"description\":null,\"modified\":\"2023-04-20 12:28:58\",\"username\":\"WSO2_Dev\"}}";

Console.WriteLine(receivedJsonString);

Transfer.ExecuteFromCAR03(receivedJsonString);*/


/*var siteTargetName = "legacy-8305740c-af62-45ad-a87f-f3499241b144";
var targetFile = "/BankStatement_test/test/WSO2_TEST/none/tmp/ปรินทร.xlsx";
var siteTargetInfo = SiteInfo.GetByName(siteTargetName);
var siteTarget = FileServer.Create(siteTargetInfo);
siteTarget.Open();
//var e = siteTarget.FileExists(targetFile);
Console.WriteLine(siteTarget.FileExists(targetFile));
Console.WriteLine(siteTarget.FileExists(targetFile));
Console.WriteLine(siteTarget.FileExists(targetFile));
Console.WriteLine(siteTarget.FileExists(targetFile));
Console.WriteLine(siteTarget.FileExists(targetFile));*/